# Using launch files

Let’s start by seeing how `roslaunch` enables us to start many nodes at once. The basic idea
is to list, in a specific XML format, a group of nodes that should [be started at the same
time](http://wiki.ros.org/roslaunch/XML). 
Listing 6.1 shows a small example launch file that starts a `turtlesim` simulator,
along with the teleoperation node that we saw in Chapter 2 and the subscriber node we
wrote in Chapter 3. This file is saved as `example.launch` in the main package directory for
the `agitr` package. Before we delve into specifics of the launch file format, let’s see how
those files can be used.

### Executing launch files

To execute a launch file, use the `roslaunch` [command:](http://wiki.ros.org/roslaunch/CommandlineTools)  
```
roslaunch package-name launch-file-name
```



```
<launch>
  <node
      pkg=" turtlesim "
      type="turtlesim_node "
      name=" turtlesim "
      respawn=" true "
  />
  <node
      pkg="turtlesim "
      type="turtle_teleop_key"
      name="teleop_key"
      required="true"
      launch − prefix="xterm −e"
  />
  <node
      pkg="agitr"
      type="subpose"
      name="pose_subscriber"
      output="screen"
  />
</launch>
```

**Listing 6.1:** A launch file called `example.launch` that starts three nodes at once.


You can invoke the example launch file using this command:

```
roslaunch agitr example.launch
```

If everything works correctly, this command will start three nodes. You should get `turtlesim` window, 
along with another window that accepts arrow key presses for teleoperating
the turtle. The original terminal in which you ran the `roslaunch` command should show
the pose information logged by our subpose program. Before starting any nodes, `roslaunch` 
will determine whether `roscore` is already running and, if not, start it automatically.

> ⚠️Be careful not to confuse `rosrun`, which starts a single node, with `roslaunch`, which
> can start many nodes at once.

<br />

> ⏩ It is also possible to use launch files that are not part of any package. To do this,
> give roslaunch only the path to the launch file, without mentioning any package.
> For example, in the author’s account, this command starts our example launch file,
> without relying on the fact that it’s a part of any ROS package:
>
> ```roslaunch ∼/ros/src/agitr/example.launch```
>
> This sort of workaround to circumvent the usual package organization is probably
> not a good idea for anything but very simple, very short-lived experimentation.

An important fact about `roslaunch`—one that can be easy to forget—is that all of the
nodes in a launch file are started at roughly the same time. As a result, you cannot be sure
about the order in which the nodes will initialize themselves. Well-written ROS nodes don’t
care about the order in which they and their siblings start up. (Section 7.3 has an example
program in which this becomes important.)

> ⏩ This behavior is a reflection of the ROS philosophy that each node should be largely
> independent of the other nodes. (Recall our discussion of loose coupling of nodes
> from Section 2.8.) Nodes that function well only when launched in a specific order
> are a poor fit for this modular design. Such nodes can almost always be redesigned
> to avoid ordering constraints


### Requesting verbosity

Like many command line tools, `roslaunch` has an option to request verbose output:

```
roslaunch -v package-name launch-file-name
```

Listing 6.2 shows an example of the information this option generates beyond the usual
status messages. It can occasionally be useful for debugging to see this detailed 
explanation of how `roslaunch` is interpreting your launch file.

### Ending a launched session

To terminate an active `roslaunch`, use `Ctrl-C`. This signal
will attempt to gracefully shut down each active node from the launch, and will forcefully
kill any nodes that do not exit within a short time after that.

```
1 . . . l o a di n g XML f i l e [ / opt / r o s / i n di g o / e t c / r o s / r o s c o r e . xml ]
2 . . . e x e c u ti n g command param [ r o s v e r s i o n r o sl a u n c h ]
3 Added p a r ame te r [ / r o s v e r s i o n ]
4 . . . e x e c u ti n g command param [ r o s v e r s i o n −d ]
5 Added p a r ame te r [ / r o s d i s t r o ]
6 Added c o r e node o f type [ r o s o u t / r o s o u t ] i n namespace [ / ]
7 . . . l o a di n g XML f i l e [ / home/ j o k a n e / r o s / a g i t r / example . l aunch ]
8 Added node o f type [ t u r t l e s i m / tu r tle sim_n ode ] i n namespace [ / ]
9 Added node o f type [ a g i t r / pubvel ] i n namespace [ / ]
10 Added node o f type [ a g i t r / subp o se ] i n namespace [ / ]
```
**Listing 6.2:** Extra output generated by the verbose mode of `roslaunch`.

